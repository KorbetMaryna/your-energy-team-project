import{t as $,f as H,a as A,b as D,c as W,d as R,e as U}from"./assets/quote-5aa18f31.js";import{i as h,l as w,a as F}from"./assets/vendor-09c79f2e.js";function v(e){return e[0].toUpperCase()+e.slice(1)}function G(e,t,s){return`      
<li class="exercises-filter-tile-item" data-name=${t} data-filter=${e.toLowerCase()}>
      <div class="exercises-filter-tile-gradient"></div>
      <img class="exercises-filter-tile-img" src="${s}" alt="${t}" onerror="this.onerror=null; this.src='./../img/no-image.jpg'"/>
      <div class="exercises-filter-tile-text-wrapper">
          <h3 class="exercises-filter-tile-headline">${v(t)}</h3>
          <p class="exercises-filter-tile-text">${e}</p>
      </div>
</li>`}function N(e,t,s,i,n,r){return`      
<li class="exercises-category-tile-item" data-id=${r}>
    <div class="exercises-category-tile-top">
      <div class="exercises-category-tile-workout-wrapper">
        <span class="exercises-category-tile-badge">WORKOUT</span>
        <div class="exercises-category-tile-rating-wrapper">
          <span class="exercises-category-tile-rating">${e.toFixed(1)}</span>
          <svg
          class="exercises-category-tile-star-icon"
          width="18"
          height="18">
            <use href="./img/icons.svg#icon-star"></use>
          </svg>
        </div>
      </div>
      <button class="exercises-category-tile-button">Start 
        <svg 
        class="exercises-category-tile-arrow-icon"
        width="36" 
        height="36">
          <use href="./img/icons.svg#icon-arrow"></use>
        </svg>
      </button>
    </div>
    <div class="exercises-category-tile-middle">
      <svg 
      class="exercises-category-tile-man-icon"
      width="24" 
      height="24">
        <use href="./img/icons.svg#icon-running-man"></use>
      </svg>
      <h3 class="exercises-category-tile-name">${t}</h3>
    </div>
    <ul class="exercises-category-tile-bottom">
        <li class="exercises-category-tile-bottom-item">
        <span class="exercises-category-tile-bottom-title">Burned calories:</span>
        ${s}</li>
        <li class="exercises-category-tile-bottom-item">
        <span class="exercises-category-tile-bottom-title">Body part:</span>
        ${v(i)}</li>
        <li class="exercises-category-tile-bottom-item">
        <span class="exercises-category-tile-bottom-title">Target:</span>
        ${v(n)}</li>
    </ul>
</li>`}h.settings({position:"topRight",transitionIn:"bounceInDown",closeOnEscape:!0});const o={headlineWrapper:document.querySelector(".js-headline-category-wrapper"),headlineCategory:document.querySelector(".js-headline-category"),searchForm:document.querySelector(".js-search-form"),filterButtons:document.querySelectorAll(".js-button"),tilesFilterList:document.querySelector(".js-tiles-filter-list"),tilesCategoryList:document.querySelector(".js-tiles-category-list"),paginationList:document.querySelector(".js-pagination")};let u={filter:"Muscles",bodypart:"",muscles:"",equipment:"",keyword:"",page:1};S(u.filter,window.innerWidth);L("filters",u);o.filterButtons.forEach(e=>{e.addEventListener("click",()=>{Y(u,e),L("filters",u),O(e)})});async function L(e,t){$(!0),await H(e,t).then(s=>{var r;const{page:i,totalPages:n}=s;if((r=s.results[0])!=null&&r.filter){const c="filters";V(s),C({page:i,totalPages:n,type:c}),K(),T()}else{const c="exercises";j(s),C({page:i,totalPages:n,type:c})}}).catch(s=>{console.log(s),h.error({message:"Something went wrong :-( try again later."})}).finally($(!1))}function V({results:e}){Q();const t=e.map(({filter:s,name:i,imgURL:n})=>G(s,i,n)).join("");o.tilesFilterList.innerHTML=t}o.tilesFilterList.addEventListener("click",z);function z(e){if(e.preventDefault(),e.currentTarget===e.target)return;let{name:t,filter:s}=e.target.parentNode.dataset;J(u,t,s),L("exercises",u),I(t),o.searchForm.classList.remove("visually-hidden")}function j({results:e}){if(!e.length)return h.warning({message:"Unfortunately, we don't have any exercises in this category"});X();const t=e.map(({rating:s,name:i,burnedCalories:n,bodyPart:r,target:c,_id:l})=>N(s,i,n,r,c,l)).join("");o.tilesCategoryList.innerHTML=t}function K(){o.headlineCategory.innerText="",o.headlineWrapper.classList.add("visually-hidden")}function I(e){o.headlineWrapper.classList.remove("visually-hidden"),o.headlineCategory.innerText=v(e)}function T(){o.searchForm.classList.add("visually-hidden")}function S(e,t){return e!==""?u.limit=t<768?9:12:u.limit=t<768?8:10,u.limit}function O(e){document.querySelector(".active-button").classList.remove("active-button"),e.classList.add("active-button")}function Y(e,t){let s={bodypart:"",muscles:"",equipment:""};S(e.filter,window.innerWidth),Object.assign(e,s),e.filter=t.innerText,e.page=1}function J(e,t,s){e.filter="",s==="body"&&(s="bodypart"),Object.assign(e,{[s]:t}),S(e.filter,window.innerWidth)}function Q(){o.tilesCategoryList.innerHTML="",o.tilesCategoryList.classList.add("visually-hidden"),o.tilesFilterList.classList.remove("visually-hidden")}function X(){o.tilesFilterList.innerHTML="",o.tilesFilterList.classList.add("visually-hidden"),o.tilesCategoryList.classList.remove("visually-hidden")}function C({page:e,totalPages:t,type:s,customListener:i}){o.paginationList.innerHTML="",t<=6?r(1,t,e,s):e<4?(r(1,4,e,s),c(),g(t,e)):e>t-3?(l(),c(),r(t-3,t,e,s)):(l(),c(),r(e-1,e+1,e,s),c(),g(t,e));function r(m,x,P,k){console.log("type: ",k);for(let E=m;E<=x;E++){const b=document.createElement("span");b.classList.add("exercises-pagination-item"),b.textContent=E,E===Number(P)&&b.classList.add("exercises-pagination-item-active"),b.addEventListener("click",()=>{u.page=E,i?i(u.page):L(k,u)}),o.paginationList.appendChild(b)}}function c(){const m=document.createElement("span");m.classList.add("exercises-pagination-item"),m.textContent="...",o.paginationList.appendChild(m)}function l(){r(1,1,e,s)}function g(m,x){r(m,m,x,s)}}const q=document.querySelector(".your-choice-button");class Z{constructor(){this.id="your-choice-modal",this.bodyPartsOptions=[],this.bodyPartsSelectElem=document.getElementById("you-choice-body-part"),this.musclesOptions=[],this.musclesSelectElem=document.getElementById("your-choice-muscle"),this.equipmentOptions=[],this.equipmentSelectElem=document.getElementById("your-choice-equipment"),this.selectGroups=document.querySelectorAll(`#${this.id} .select-group`),this.submitBtnElem=document.getElementById("search-exercises"),this.submitBtnElem.addEventListener("click",()=>{this.triggerSearchExercises()}),w.init()}async show(){w.show(this.id);try{const[t,s,i]=await Promise.all([A(),D(),W()]);this.musclesOptions=t.results,this.bodyPartsOptions=s.results,this.equipmentOptions=i.results,console.log({muscles:t,bodyParts:s,equipment:i}),this.hideLoading(),this.toggleShowSelectGroups(!0),[{filters:this.musclesOptions,elem:this.musclesSelectElem},{filters:this.bodyPartsOptions,elem:this.bodyPartsSelectElem},{filters:this.equipmentOptions,elem:this.equipmentSelectElem}].forEach(({filters:n,elem:r})=>{console.log({filters:n,elem:r});const c=[];for(let l=0;l<n.length;l++){const{name:g}=n[l];c.push(`<option value=${l}>${g}</option>`)}r.innerHTML=c.join(""),this.hideLoading()})}catch(t){const s="Could not fetch lists of filters for modal";console.error(s,t),h.error({message:s})}}hideLoading(){document.querySelector(`#${this.id} .modal__content-loading`).classList.add("hidden")}toggleShowSelectGroups(t){for(const s of this.selectGroups)t?s.classList.remove("hidden"):s.classList.add("hidden")}getFormValues(){return{bodyPart:this.bodyPartsOptions[this.bodyPartsSelectElem.value].name,muscle:this.musclesOptions[this.musclesSelectElem.value].name,equipment:this.equipmentOptions[this.equipmentSelectElem.value].name}}async triggerSearchExercises(){const{bodyPart:t,muscle:s,equipment:i}=this.getFormValues();if(!(!t||!s||!i)){this.submitBtnElem.disabled=!0;try{if(!await this.getAndRenderExercises({page:1})){h.warning({message:"No exercises found. Try another set of muscle, body part and equipment paramaters."}),this.submitBtnElem.disabled=!1;return}I("you choice"),T(),w.close(),O(q)}catch(n){const r="Could not fetch exercises because of error";console.error(r,n),h.error({message:r})}finally{this.submitBtnElem.disabled=!1}}}async getAndRenderExercises({page:t=1}){const{bodyPart:s,muscle:i,equipment:n}=this.getFormValues(),r=S();console.log("Calling api with",{bodyPart:s,muscle:i,equipment:n,page:t,limit:r});const{totalPages:c,results:l}=await R({bodyPart:s,muscle:i,equipment:n,page:t,limit:r});return console.log({results:l}),(l||[]).length?(j({results:l}),C({page:t,totalPages:c,customListener:g=>{this.getAndRenderExercises({page:g})}}),!0):!1}}if(q){const e=new Z;q.addEventListener("click",()=>{e.show()})}const ee=document.querySelector(".footer-sub-form"),te="https://your-energy.b.goit.study/api/";ee.addEventListener("submit",se);async function se(e){e.preventDefault();const t=e.target.email.value;try{const{data:s}=await F.post(`${te}subscription`,{email:t});ie(s.message)}catch(s){U(s.response.data.message)}}function ie(e){h.success({message:`${e}`})}function M(e,t=300){let s;return(...i)=>{clearTimeout(s),s=setTimeout(()=>{e.apply(this,i)},t)}}function y(e){e.classList.remove("visually-hidden")}function f(e){e.classList.add("visually-hidden")}const d={searchClearBtnEl:document.querySelector(".js-search-form--btn__clear"),searchInputEl:document.querySelector(".js-search-form--input"),searchIconEl:document.querySelector(".js-search-form--btn__search"),searchClearEl:document.querySelector(".js-search-form--btn__clear"),searchFormEl:document.querySelector(".js-search-form")},re=M(e=>ne(e),400);d.searchClearBtnEl.addEventListener("click",oe);d.searchInputEl.addEventListener("input",re);d.searchFormEl.addEventListener("submit",ce);function ne({target:e}){e!=null&&e.value.trim()?(y(d.searchClearEl),f(d.searchIconEl)):(f(d.searchClearEl),y(d.searchIconEl))}function oe(){d.searchInputEl.value="",f(d.searchClearEl),y(d.searchIconEl)}function ce(e){e.preventDefault()}window.onscroll=function(){le()};function le(){document.body.scrollTop>1e3||document.documentElement.scrollTop>1e3?document.getElementById("scroll-up").style.display="block":document.getElementById("scroll-up").style.display="none"}const ae="https://your-energy.b.goit.study/api";async function ue(e){console.log(e);for(const i of Object.keys(e))e[i]===""&&delete e[i];const t=new URLSearchParams(e),{data:s}=await F(`${ae}/exercises?${t}`);return s}const a={searchClearBtnEl:document.querySelector(".js-search-form--btn__clear"),searchInputEl:document.querySelector(".js-search-form--input"),searchIconEl:document.querySelector(".js-search-form--btn__search"),searchFormEl:document.querySelector(".js-search-form"),tilesFilterList:document.querySelector(".js-tiles-filter-list")},de=M(e=>me(e),400);a.searchClearBtnEl.addEventListener("click",_);a.searchInputEl.addEventListener("input",de);a.searchFormEl.addEventListener("submit",he);let p={bodypart:"",muscles:"",equipment:"",keyword:"",page:1};function me({target:e}){e!=null&&e.value.trim()?(y(a.searchClearBtnEl),f(a.searchIconEl)):(f(a.searchClearBtnEl),y(a.searchIconEl))}function _(){a.searchInputEl.value="",p.keyword="",f(a.searchClearBtnEl),y(a.searchIconEl)}function he(e){e.preventDefault(),p.keyword=a.searchInputEl.value,p.limit=window.innerWidth<768?8:10,ue(p).then(t=>{console.log(t),j(t)}).catch(t=>{console.log(t),h.error({message:"Something went wrong :-( try again later."})}),_()}var B;(B=a.tilesFilterList)==null||B.addEventListener("click",pe);function pe(e){if(e.preventDefault(),Object.assign(p,{bodypart:"",muscles:"",equipment:"",keyword:""}),e.currentTarget===e.target)return;let{name:s,filter:i}=e.target.parentNode.dataset;i==="body"&&(i="bodypart"),Object.assign(p,{[i]:s}),console.log(p)}
//# sourceMappingURL=commonHelpers2.js.map
