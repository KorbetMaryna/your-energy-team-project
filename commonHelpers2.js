import{t as j,f as _,a as D,b as R,c as G,d as U,e as N,g as V}from"./assets/showPageError-09270c6f.js";import{i as m,l as k,a as z}from"./assets/vendor-09c79f2e.js";function g(e){return e[0].toUpperCase()+e.slice(1)}function Y(e,s,t){return`      
<li class="exercises-filter-tile-item" data-name=${s} data-filter=${e.toLowerCase()}>
      <div class="exercises-filter-tile-gradient"></div>
      <img class="exercises-filter-tile-img" src="${t}" alt="${s}" onerror="this.onerror=null; this.src='./../img/no-image.jpg'"/>
      <div class="exercises-filter-tile-text-wrapper">
          <h3 class="exercises-filter-tile-headline">${g(s)}</h3>
          <p class="exercises-filter-tile-text">${e}</p>
      </div>
</li>`}function K(e,s,t,i,n,o){return`      
<li class="exercises-category-tile-item" data-id=${o}>
    <div class="exercises-category-tile-top">
      <div class="exercises-category-tile-workout-wrapper">
        <span class="exercises-category-tile-badge">WORKOUT</span>
        <div class="exercises-category-tile-rating-wrapper">
          <span class="exercises-category-tile-rating">${e.toFixed(1)}</span>
          <svg
          class="exercises-category-tile-star-icon"
          width="18"
          height="18">
            <use href="./img/icons.svg#icon-star"></use>
          </svg>
        </div>
      </div>
      <button class="exercises-category-tile-button">Start 
        <svg 
        class="exercises-category-tile-arrow-icon"
        width="36" 
        height="36">
          <use href="./img/icons.svg#icon-arrow"></use>
        </svg>
      </button>
    </div>
    <div class="exercises-category-tile-middle">
      <svg 
      class="exercises-category-tile-man-icon"
      width="24" 
      height="24">
        <use href="./img/icons.svg#icon-running-man"></use>
      </svg>
      <h3 class="exercises-category-tile-name">${s}</h3>
    </div>
    <ul class="exercises-category-tile-bottom">
        <li class="exercises-category-tile-bottom-item">
        <span class="exercises-category-tile-bottom-title">Burned calories:</span>
        ${t}</li>
        <li class="exercises-category-tile-bottom-item">
        <span class="exercises-category-tile-bottom-title">Body part:</span>
        ${g(i)}</li>
        <li class="exercises-category-tile-bottom-item">
        <span class="exercises-category-tile-bottom-title">Target:</span>
        ${g(n)}</li>
    </ul>
</li>`}m.settings({position:"topRight",transitionIn:"bounceInDown",closeOnEscape:!0});const r={headlineWrapper:document.querySelector(".js-headline-category-wrapper"),headlineCategory:document.querySelector(".js-headline-category"),searchForm:document.querySelector(".js-search-form"),filterButtons:document.querySelectorAll(".js-button"),tilesFilterList:document.querySelector(".js-tiles-filter-list"),tilesCategoryList:document.querySelector(".js-tiles-category-list"),paginationList:document.querySelector(".js-pagination")};let c={filter:"Muscles",bodypart:"",muscles:"",equipment:"",keyword:"",page:1};f(c.filter);S("filters",c);r.filterButtons.forEach(e=>{e.addEventListener("click",()=>{Z(c,e),S("filters",c),$(e)})});async function S(e,s){j(!0),await _(e,s).then(t=>{var o;const{page:i,totalPages:n}=t;if((o=t.results[0])!=null&&o.filter){const l="filters";J(t),b({page:i,totalPages:n,type:l}),M()}else{const l="exercises";B(t),b({page:i,totalPages:n,type:l})}}).catch(t=>{console.log(t),m.error({message:"Something went wrong :-( try again later."})}).finally(j(!1))}function J({results:e}){te();const s=e.map(({filter:t,name:i,imgURL:n})=>Y(t,i,n)).join("");r.tilesFilterList.innerHTML=s}r.tilesFilterList.addEventListener("click",Q);function Q(e){if(e.preventDefault(),e.currentTarget===e.target)return;let{name:s,filter:t}=e.target.parentNode.dataset;ee(c,s,t),S("exercises",c),O(s)}function B({results:e}){if(!e.length)return m.warning({message:"Unfortunately, we don't have any exercises in this category"});se(),X();const s=e.map(({rating:t,name:i,burnedCalories:n,bodyPart:o,target:l,_id:a})=>K(t,i,n,o,l,a)).join("");r.tilesCategoryList.innerHTML=s}function M(){r.headlineCategory.innerText="",r.headlineWrapper.classList.add("visually-hidden"),r.searchForm.classList.add("visually-hidden")}function X(){r.headlineWrapper.classList.remove("visually-hidden"),r.searchForm.classList.remove("visually-hidden")}function O(e){r.headlineCategory.innerText=g(e)}function f(e){return e!==""?c.limit=window.innerWidth<768?9:12:c.limit=window.innerWidth<768?8:10,c.limit}function $(e){document.querySelector(".active-button").classList.remove("active-button"),e.classList.add("active-button")}function Z(e,s){let t={bodypart:"",muscles:"",equipment:""};f(e.filter),Object.assign(e,t),e.filter=s.innerText,e.page=1}function ee(e,s,t){e.filter="",t==="body"&&(t="bodypart"),Object.assign(e,{[t]:s}),f(e.filter)}function te(){r.tilesCategoryList.innerHTML="",r.tilesCategoryList.classList.add("visually-hidden"),r.tilesFilterList.classList.remove("visually-hidden"),v()&&r.tilesCategoryList.classList.remove("category-desktop"),v()&&r.tilesFilterList.classList.add("filter-desktop")}function se(){r.tilesFilterList.innerHTML="",r.tilesFilterList.classList.add("visually-hidden"),r.tilesCategoryList.classList.remove("visually-hidden"),v()&&r.tilesFilterList.classList.remove("filter-desktop"),v()&&r.tilesCategoryList.classList.add("category-desktop")}function v(){return window.innerWidth>=1440}function b({page:e,totalPages:s,type:t,customListener:i}){r.paginationList.innerHTML="",s<=6?o(1,s,e,t):e<4?(o(1,4,e,t),l(),h(s,e)):e>s-3?(a(),l(),o(s-3,s,e,t)):(a(),l(),o(e-1,e+1,e,t),l(),h(s,e));function o(u,w,A,W){for(let p=u;p<=w;p++){const y=document.createElement("span");y.classList.add("exercises-pagination-item"),y.textContent=p,p===Number(A)&&y.classList.add("exercises-pagination-item-active"),y.addEventListener("click",()=>{c.page=p,i?i(c.page):S(W,c)}),r.paginationList.appendChild(y)}}function l(){const u=document.createElement("span");u.classList.add("exercises-pagination-item"),u.textContent="...",r.paginationList.appendChild(u)}function a(){o(1,1,e,t)}function h(u,w){o(u,u,w,t)}}const q=document.querySelector(".your-choice-button");class ie{constructor(){this.id="your-choice-modal",this.bodyPartsOptions=[],this.bodyPartsSelectElem=document.getElementById("you-choice-body-part"),this.musclesOptions=[],this.musclesSelectElem=document.getElementById("your-choice-muscle"),this.equipmentOptions=[],this.equipmentSelectElem=document.getElementById("your-choice-equipment"),this.selectGroups=document.querySelectorAll(`#${this.id} .select-group`),this.submitBtnElem=document.getElementById("search-exercises"),this.submitBtnElem.addEventListener("click",()=>{this.triggerSearchExercises()}),k.init()}async show(){k.show(this.id);try{const[s,t,i]=await Promise.all([D(),R(),G()]);this.musclesOptions=s.results,this.bodyPartsOptions=t.results,this.equipmentOptions=i.results,console.log({muscles:s,bodyParts:t,equipment:i}),this.hideLoading(),this.toggleShowSelectGroups(!0),[{filters:this.musclesOptions,elem:this.musclesSelectElem},{filters:this.bodyPartsOptions,elem:this.bodyPartsSelectElem},{filters:this.equipmentOptions,elem:this.equipmentSelectElem}].forEach(({filters:n,elem:o})=>{console.log({filters:n,elem:o});const l=[];for(let a=0;a<n.length;a++){const{name:h}=n[a];l.push(`<option value=${a}>${h}</option>`)}o.innerHTML=l.join(""),this.hideLoading()})}catch(s){const t="Could not fetch lists of filters for modal";console.error(t,s),m.error({message:t})}}hideLoading(){document.querySelector(`#${this.id} .modal__content-loading`).classList.add("hidden")}toggleShowSelectGroups(s){for(const t of this.selectGroups)s?t.classList.remove("hidden"):t.classList.add("hidden")}getFormValues(){return{bodyPart:this.bodyPartsOptions[this.bodyPartsSelectElem.value].name,muscle:this.musclesOptions[this.musclesSelectElem.value].name,equipment:this.equipmentOptions[this.equipmentSelectElem.value].name}}async triggerSearchExercises(){const{bodyPart:s,muscle:t,equipment:i}=this.getFormValues();if(!(!s||!t||!i)){this.submitBtnElem.disabled=!0;try{if(!await this.getAndRenderExercises({page:1})){m.warning({message:"No exercises found. Try another set of muscle, body part and equipment paramaters."}),this.submitBtnElem.disabled=!1;return}O("you choice"),M(),k.close(),$(q)}catch(n){const o="Could not fetch exercises because of error";console.error(o,n),m.error({message:o})}finally{this.submitBtnElem.disabled=!1}}}async getAndRenderExercises({page:s=1}){const{bodyPart:t,muscle:i,equipment:n}=this.getFormValues(),o=f("");console.log("Calling api with",{bodyPart:t,muscle:i,equipment:n,page:s,limit:o});const{totalPages:l,results:a}=await U({bodyPart:t,muscle:i,equipment:n,page:s,limit:o});return console.log({results:a}),(a||[]).length?(B({results:a}),b({page:s,totalPages:l,customListener:h=>{this.getAndRenderExercises({page:h})}}),!0):!1}}if(q){const e=new ie;q.addEventListener("click",()=>{e.show()})}const re=document.querySelector(".footer-sub-form"),oe="https://your-energy.b.goit.study/api/";re.addEventListener("submit",ne);async function ne(e){e.preventDefault();const s=e.target.email.value;try{const{data:t}=await z.post(`${oe}subscription`,{email:s});ce(t.message)}catch(t){N(t.response.data.message)}}function ce(e){m.success({message:`${e}`})}function le(e,s=300){let t;return(...i)=>{clearTimeout(t),t=setTimeout(()=>{e.apply(this,i)},s)}}function C(e){e.classList.remove("visually-hidden")}function T(e){e.classList.add("visually-hidden")}const d={searchClearBtnEl:document.querySelector(".js-search-form--btn__clear"),searchInputEl:document.querySelector(".js-search-form--input"),searchIconEl:document.querySelector(".js-search-form--btn__search"),searchClearEl:document.querySelector(".js-search-form--btn__clear"),searchFormEl:document.querySelector(".js-search-form")},ae=le(e=>de(e),400);d.searchClearBtnEl.addEventListener("click",I);d.searchInputEl.addEventListener("input",ae);d.searchFormEl.addEventListener("submit",ue);function de({target:e}){e!=null&&e.value.trim()?(C(d.searchClearEl),T(d.searchIconEl)):(T(d.searchClearEl),C(d.searchIconEl))}function I(){d.searchInputEl.value="",T(d.searchClearEl),C(d.searchIconEl)}async function ue(e){e.preventDefault();const s=e.target.elements.search.value;if(s.trim()){const t=f(""),{totalPages:i,results:n}=await V({bodypart:c.bodypart||"",muscles:c.muscles||"",equipment:c.equipment||"",page:c.page,keyword:s,limit:t});B({results:n}),b({page:c.page,totalPages:i,type:"exercises"})}else m.warning({message:"You should type something before searching!"});I()}const L=document.getElementById("scroll-up");L.addEventListener("click",pe);L.style.display="none";window.onscroll=function(){me()};function me(){const e=he();document.body.scrollTop>e||document.documentElement.scrollTop>e?L.style.display="block":L.style.display="none"}function he(){const e=window.innerWidth;return e<375?300:e<768?500:e<1440?800:1e3}function pe(){document.body.scrollTop=0,document.documentElement.scrollTop=0}const ye=document.querySelector(".footer-information-list");ye.addEventListener("click",fe);function fe(e){switch(e.target.classList.value){case"footer-privacy-policy":ge(),H.addEventListener("click",ve);break;case"footer-service-terms":be(),F.addEventListener("click",P);break}}const H=document.querySelector(".info-close-btn-id"),E=document.querySelector(".info-backdrop-id");document.querySelector(".info-modal");function ge(){E.style.opacity="1",E.classList.remove("is-hidden"),document.body.style.overflow="hidden"}function ve(){E.style.opacity="0",E.classList.add("is-hidden"),document.body.style.overflow="",H.removeEventListener("click")}const F=document.querySelector(".terms-close-btn-id"),x=document.querySelector(".terms-backdrop-id");document.querySelector(".terms-modal");F.addEventListener("click",P);function be(){x.style.opacity="1",x.classList.remove("is-hidden"),document.body.style.overflow="hidden"}function P(){x.style.opacity="0",x.classList.add("is-hidden"),document.body.style.overflow="",F.removeEventListener("click")}
//# sourceMappingURL=commonHelpers2.js.map
