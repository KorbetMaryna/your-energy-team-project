{"version":3,"file":"commonHelpers.js","sources":["../src/js/favorite-workouts.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  noExMessage: document.querySelector('.js-no-exercises-message'),\n  workoutsList: document.querySelector('.js-workouts-list'),\n};\n\ncreateStartMarkup();\n\nfunction createStartMarkup() {\n  let savedExercises = JSON.parse(localStorage.getItem('savedExercises'));\n\n  checkIfEmpty(savedExercises);\n  refs.workoutsList.addEventListener('click', removeWorkoutCard);\n\n  let currentSavedExercises;\n  let isCardsActual;\n  setInterval(() => {\n    currentSavedExercises = JSON.parse(localStorage.getItem('savedExercises'));\n\n    if (currentSavedExercises === null) {\n      return;\n    }\n\n    isCardsActual = currentSavedExercises.length === savedExercises.length;\n    if (isCardsActual) {\n      isCardsActual = currentSavedExercises.every((card, idx) => {\n        return card._id === savedExercises[idx]._id;\n      });\n    }\n    if (!isCardsActual) {\n      savedExercises = [...currentSavedExercises];\n      checkIfEmpty(savedExercises);\n    }\n  }, 2000);\n}\n\nfunction checkIfEmpty(savedExercises) {\n  if (!savedExercises || savedExercises.length === 0) {\n    refs.noExMessage.hidden = false;\n    refs.workoutsList.classList.remove('fav-workouts-list');\n    refs.workoutsList.innerHTML = '';\n  } else {\n    refs.noExMessage.hidden = true;\n    refs.workoutsList.classList.add('fav-workouts-list');\n    refs.workoutsList.innerHTML = createWorkoutCardsMarkup(savedExercises);\n  }\n}\n\nfunction removeWorkoutCard(evt) {\n  const target = evt.target;\n  const closestButton = target.closest('.fav-workouts-remove-button');\n  if (!closestButton) {\n    return;\n  }\n  const removeElement = target.closest('.fav-workouts-list-item');\n  const removeElementId = removeElement.dataset.id;\n  const savedExercises = JSON.parse(localStorage.getItem('savedExercises'));\n\n  const removeElementIndex = savedExercises.findIndex(\n    excercise => excercise._id === removeElementId\n  );\n  if (removeElementIndex === -1) {\n    showMessage('error', 'Excercise is already removed from favorites.');\n  } else {\n    savedExercises.splice(removeElementIndex, 1);\n    localStorage.setItem('savedExercises', JSON.stringify(savedExercises));\n  }\n  refs.workoutsList.innerHTML = createWorkoutCardsMarkup(savedExercises);\n  checkIfEmpty(savedExercises);\n}\n\nfunction createWorkoutCardsMarkup(array) {\n  return array.map(obj => createWorkoutCardMarkup(obj)).join('');\n}\n\nfunction createWorkoutCardMarkup({\n  _id,\n  name,\n  time,\n  burnedCalories,\n  bodyPart,\n  target,\n} = {}) {\n  return `<li class=\"fav-workouts-list-item\" data-id=\"${_id}\">\n      <div class=\"fav-workouts-list-item-buttons\">\n        <div class=\"fav-workouts-tag-remove-wrapper\">\n          <span class=\"fav-workouts-tag\">Workout</span>\n          <button class=\"fav-workouts-remove-button\" type=\"button\">\n            <svg class=\"fav-workouts-remove-icon\" width=\"16px\" height=\"15px\">\n              <use href=\"./img/icons.svg#icon-trash\"></use>\n            </svg>\n          </button>\n        </div>\n\n        <button type=\"button\" class=\"fav-workouts-start-button\">\n          <span class=\"fav-workouts-start-text\">Start</span>\n          <svg class=\"fav-workouts-arrow-icon\" width=\"16px\" height=\"16px\">\n            <use href=\"./img/icons.svg#icon-arrow\"></use>\n          </svg>\n        </button>\n      </div>\n\n      <div class=\"fav-workouts-excercise-name-wrapper\">\n        <div class=\"fav-workouts-running-icon-wrapper\">\n          <svg class=\"fav-workouts-running-icon\" width=\"20px\" height=\"20px\">\n            <use href=\"./img/icons.svg#icon-running-man\"></use>\n          </svg>\n        </div>\n        <h3 class=\"fav-workouts-excercise-name\">${name}</h3>\n      </div>\n\n      <ul class=\"fav-workouts-descr-list\">\n        <li class=\"fav-workouts-descr-list-category\">\n          Burned calories:\n          <span class=\"fav-workouts-descr-list-value\">${burnedCalories} / ${time} min</span>\n        </li>\n        <li class=\"fav-workouts-descr-list-category\">\n          Body part: <span class=\"fav-workouts-descr-list-value\">${bodyPart}</span>\n        </li>\n        <li class=\"fav-workouts-descr-list-category\">\n          Target: <span class=\"fav-workouts-descr-list-value\">${target}</span>\n        </li>\n      </ul>\n    </li>`;\n}\n\nfunction showMessage(type, message) {\n  let color;\n  if (type === 'error') {\n    color = '#f58e82';\n  } else {\n    color = '#9dfab5';\n  }\n\n  iziToast.show({\n    messageColor: '#262121',\n    backgroundColor: color,\n    messageSize: '18px',\n    position: 'bottomRight',\n    progressBar: false,\n    animateInside: false,\n    timeout: 3000,\n    targetFirst: false,\n    message: message,\n  });\n}\n"],"names":["refs","createStartMarkup","savedExercises","checkIfEmpty","removeWorkoutCard","currentSavedExercises","isCardsActual","card","idx","createWorkoutCardsMarkup","evt","target","removeElementId","removeElementIndex","excercise","showMessage","array","obj","createWorkoutCardMarkup","_id","name","time","burnedCalories","bodyPart","type","message","color","iziToast"],"mappings":"mFAGA,MAAMA,EAAO,CACX,YAAa,SAAS,cAAc,0BAA0B,EAC9D,aAAc,SAAS,cAAc,mBAAmB,CAC1D,EAEAC,IAEA,SAASA,GAAoB,CAC3B,IAAIC,EAAiB,KAAK,MAAM,aAAa,QAAQ,gBAAgB,CAAC,EAEtEC,EAAaD,CAAc,EAC3BF,EAAK,aAAa,iBAAiB,QAASI,CAAiB,EAE7D,IAAIC,EACAC,EACJ,YAAY,IAAM,CAChBD,EAAwB,KAAK,MAAM,aAAa,QAAQ,gBAAgB,CAAC,EAErEA,IAA0B,OAI9BC,EAAgBD,EAAsB,SAAWH,EAAe,OAC5DI,IACFA,EAAgBD,EAAsB,MAAM,CAACE,EAAMC,IAC1CD,EAAK,MAAQL,EAAeM,CAAG,EAAE,GACzC,GAEEF,IACHJ,EAAiB,CAAC,GAAGG,CAAqB,EAC1CF,EAAaD,CAAc,GAE9B,EAAE,GAAI,CACT,CAEA,SAASC,EAAaD,EAAgB,CAChC,CAACA,GAAkBA,EAAe,SAAW,GAC/CF,EAAK,YAAY,OAAS,GAC1BA,EAAK,aAAa,UAAU,OAAO,mBAAmB,EACtDA,EAAK,aAAa,UAAY,KAE9BA,EAAK,YAAY,OAAS,GAC1BA,EAAK,aAAa,UAAU,IAAI,mBAAmB,EACnDA,EAAK,aAAa,UAAYS,EAAyBP,CAAc,EAEzE,CAEA,SAASE,EAAkBM,EAAK,CAC9B,MAAMC,EAASD,EAAI,OAEnB,GAAI,CADkBC,EAAO,QAAQ,6BAA6B,EAEhE,OAGF,MAAMC,EADgBD,EAAO,QAAQ,yBAAyB,EACxB,QAAQ,GACxCT,EAAiB,KAAK,MAAM,aAAa,QAAQ,gBAAgB,CAAC,EAElEW,EAAqBX,EAAe,UACxCY,GAAaA,EAAU,MAAQF,CACnC,EACMC,IAAuB,GACzBE,EAAY,QAAS,8CAA8C,GAEnEb,EAAe,OAAOW,EAAoB,CAAC,EAC3C,aAAa,QAAQ,iBAAkB,KAAK,UAAUX,CAAc,CAAC,GAEvEF,EAAK,aAAa,UAAYS,EAAyBP,CAAc,EACrEC,EAAaD,CAAc,CAC7B,CAEA,SAASO,EAAyBO,EAAO,CACvC,OAAOA,EAAM,IAAIC,GAAOC,EAAwBD,CAAG,CAAC,EAAE,KAAK,EAAE,CAC/D,CAEA,SAASC,EAAwB,CAC/B,IAAAC,EACA,KAAAC,EACA,KAAAC,EACA,eAAAC,EACA,SAAAC,EACA,OAAAZ,CACF,EAAI,GAAI,CACN,MAAO,+CAA+CQ,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAyBTC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wDAMEE,CAAc,MAAMD,CAAI;AAAA;AAAA;AAAA,mEAGbE,CAAQ;AAAA;AAAA;AAAA,gEAGXZ,CAAM;AAAA;AAAA;AAAA,UAItE,CAEA,SAASI,EAAYS,EAAMC,EAAS,CAClC,IAAIC,EACAF,IAAS,QACXE,EAAQ,UAERA,EAAQ,UAGVC,EAAS,KAAK,CACZ,aAAc,UACd,gBAAiBD,EACjB,YAAa,OACb,SAAU,cACV,YAAa,GACb,cAAe,GACf,QAAS,IACT,YAAa,GACb,QAASD,CACb,CAAG,CACH"}