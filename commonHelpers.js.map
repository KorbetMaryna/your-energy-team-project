{"version":3,"file":"commonHelpers.js","sources":["../src/js/favorite-workouts-markup.js","../src/js/favorite-workouts.js"],"sourcesContent":["//Pagination\nexport function createPaginationMarkup(currentPage, totalPages) {\n  return createBeforePageNumbersMarkup(currentPage === 1).concat(\n    createPageNumbersMarkup(currentPage, totalPages),\n    createAfterPageNumbersMarkup(currentPage === totalPages)\n  );\n}\n\nfunction createPageNumbersMarkup(currentPage, totalPages) {\n  let pageNumbers = '';\n  for (let i = 1; i <= totalPages; i += 1) {\n    if (i < currentPage - 2) {\n      pageNumbers = pageNumbers.concat(\n        '<li><span class=\"pagination-number\">...</span></li>'\n      );\n      i = currentPage - 3;\n      continue;\n    }\n    if (i > currentPage + 2) {\n      pageNumbers = pageNumbers.concat(\n        '<li><span class=\"pagination-number\">...</span></li>'\n      );\n      break;\n    }\n    pageNumbers = pageNumbers.concat(`<li>\n        <button class=\"js-page pagination-number${\n          i === currentPage ? ' active' : ''\n        }\" type=\"button\"  data-page-navigate=${i}>${i}</button>\n      </li>`);\n  }\n  return `<ul class=\"fav-workouts-pagination-numbers\">\n      ${pageNumbers}\n    </ul>`;\n}\n\nfunction createBeforePageNumbersMarkup(isDisabled) {\n  return `    <ul class=\"pagination-btns fav-workouts-pagination-start\">\n      <li class=\"\">\n        <button class=\"js-page left pagination-btn\" type=\"button\"${\n          isDisabled ? ' disabled' : ''\n        } data-page-navigate=\"first-page\">\n          <svg class=\"\" width=\"7px\" height=\"14px\">\n            <use href=\"./img/icons.svg#icon-next\"></use>\n          </svg>\n          <svg class=\"\" width=\"7px\" height=\"14px\">\n            <use href=\"./img/icons.svg#icon-next\"></use>\n          </svg>\n        </button>\n      </li>\n      <li class=\"\">\n        <button class=\"js-page left pagination-btn\" type=\"button\"${\n          isDisabled ? ' disabled' : ''\n        } data-page-navigate=\"previous-page\">\n          <svg class=\"\" width=\"7px\" height=\"14px\">\n            <use href=\"./img/icons.svg#icon-next\"></use>\n          </svg>\n        </button>\n      </li>\n    </ul>`;\n}\n\nfunction createAfterPageNumbersMarkup(isDisabled) {\n  return `<ul class=\"pagination-btns fav-workouts-pagination-end\">\n      <li class=\"\">\n        <button class=\"js-page pagination-btn\" type=\"button\"${\n          isDisabled ? ' disabled' : ''\n        } data-page-navigate=\"next-page\">\n          <svg class=\"\" width=\"7px\" height=\"14px\">\n            <use href=\"./img/icons.svg#icon-next\"></use>\n          </svg>\n        </button>\n      </li>\n      <li class=\"\">\n        <button class=\"js-page pagination-btn\" type=\"button\"${\n          isDisabled ? ' disabled' : ''\n        } data-page-navigate=\"last-page\">\n          <svg class=\"\" width=\"7px\" height=\"14px\">\n            <use href=\"./img/icons.svg#icon-next\"></use>\n          </svg>\n          <svg class=\"\" width=\"7px\" height=\"14px\">\n            <use href=\"./img/icons.svg#icon-next\"></use>\n          </svg>\n        </button>\n      </li>\n    </ul>`;\n}\n\n//Workouts cards\nexport function createWorkoutCardsMarkup(array) {\n  return array.map(obj => createWorkoutCardMarkup(obj)).join('');\n}\n\nfunction createWorkoutCardMarkup({\n  _id,\n  name,\n  time,\n  burnedCalories,\n  bodyPart,\n  target,\n} = {}) {\n  return `<li class=\"fav-workouts-list-item\" data-id=\"${_id}\">\n      <div class=\"fav-workouts-list-item-buttons\">\n        <div class=\"fav-workouts-tag-remove-wrapper\">\n          <span class=\"fav-workouts-tag\">Workout</span>\n          <button class=\"fav-workouts-remove-button\" type=\"button\">\n            <svg class=\"fav-workouts-remove-icon\" width=\"16px\" height=\"15px\">\n              <use href=\"./img/icons.svg#icon-trash\"></use>\n            </svg>\n          </button>\n        </div>\n\n        <button type=\"button\" class=\"fav-workouts-start-button\">\n          <span class=\"fav-workouts-start-text\">Start</span>\n          <svg class=\"fav-workouts-arrow-icon\" width=\"16px\" height=\"16px\">\n            <use href=\"./img/icons.svg#icon-arrow\"></use>\n          </svg>\n        </button>\n      </div>\n\n      <div class=\"fav-workouts-excercise-name-wrapper\">\n        <div class=\"fav-workouts-running-icon-wrapper\">\n          <svg class=\"fav-workouts-running-icon\" width=\"20px\" height=\"20px\">\n            <use href=\"./img/icons.svg#icon-running-man\"></use>\n          </svg>\n        </div>\n        <h3 class=\"fav-workouts-excercise-name\">${name}</h3>\n      </div>\n\n      <ul class=\"fav-workouts-descr-list\">\n        <li class=\"fav-workouts-descr-list-category\">\n          Burned calories:\n          <span class=\"fav-workouts-descr-list-value\">${burnedCalories} / ${time} min</span>\n        </li>\n        <li class=\"fav-workouts-descr-list-category\">\n          Body part: <span class=\"fav-workouts-descr-list-value\">${\n            bodyPart[0].toUpperCase() + bodyPart.substring(1)\n          }</span>\n        </li>\n        <li class=\"fav-workouts-descr-list-category\">\n          Target: <span class=\"fav-workouts-descr-list-value\">${\n            target[0].toUpperCase() + target.substring(1)\n          }</span>\n        </li>\n      </ul>\n    </li>`;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport {\n  createWorkoutCardsMarkup,\n  createPaginationMarkup,\n} from './favorite-workouts-markup';\n\nconst refs = {\n  noExMessage: document.querySelector('.js-no-exercises-message'),\n  workoutsList: document.querySelector('.js-workouts-list'),\n  paginationList: document.querySelector('.js-fav-pagination'),\n};\n\nlet currentPage = 1;\nlet totalPages = 1;\nlet device =\n  window.innerWidth < 768\n    ? 'phone'\n    : window.innerWidth < 1440\n    ? 'tablet'\n    : 'desktop';\n\ncreateStartMarkup();\n\nfunction createStartMarkup() {\n  let savedExercises = JSON.parse(localStorage.getItem('savedExercises'));\n\n  renderWorkoutsMarkup(savedExercises);\n  refs.workoutsList.addEventListener('click', removeWorkoutCard);\n  refs.paginationList.addEventListener('click', navigateToPage);\n\n  let currentSavedExercises;\n  let isCardsActual;\n  setInterval(() => {\n    currentSavedExercises = JSON.parse(localStorage.getItem('savedExercises'));\n\n    if (currentSavedExercises === null) {\n      return;\n    }\n\n    const newDevice =\n      window.innerWidth < 768\n        ? 'phone'\n        : window.innerWidth < 1440\n        ? 'tablet'\n        : 'desktop';\n\n    if (newDevice !== device) {\n      device = newDevice;\n      renderWorkoutsMarkup(currentSavedExercises);\n      return;\n    }\n\n    isCardsActual = currentSavedExercises.length === savedExercises.length;\n    if (isCardsActual) {\n      isCardsActual = currentSavedExercises.every((card, idx) => {\n        return card._id === savedExercises[idx]._id;\n      });\n    }\n    if (!isCardsActual) {\n      savedExercises = [...currentSavedExercises];\n      renderWorkoutsMarkup(savedExercises);\n    }\n  }, 1000);\n}\n\nfunction renderWorkoutsMarkup(savedExercises) {\n  if (!savedExercises || savedExercises.length === 0) {\n    refs.noExMessage.hidden = false;\n    refs.noExMessage.classList.remove('visually-hidden');\n    refs.workoutsList.classList.remove('fav-workouts-list');\n    refs.workoutsList.innerHTML = '';\n    return;\n  }\n\n  refs.noExMessage.hidden = true;\n  refs.noExMessage.classList.add('visually-hidden');\n  refs.workoutsList.classList.add('fav-workouts-list');\n\n  if (window.innerWidth >= 1440) {\n    refs.workoutsList.innerHTML = createWorkoutCardsMarkup(savedExercises);\n  } else {\n    if (window.innerWidth >= 768) {\n      totalPages = Math.ceil(savedExercises.length / 10);\n      if (currentPage > totalPages) {\n        currentPage = totalPages;\n      }\n      const excercises = savedExercises.slice(\n        (currentPage - 1) * 10,\n        currentPage * 10\n      );\n      if (currentPage !== 1 && savedExercises.length === 0) {\n        currentPage -= 1;\n        refs.workoutsList.innerHTML = createWorkoutCardsMarkup(\n          savedExercises.slice((currentPage - 1) * 10, currentPage * 10)\n        );\n      } else {\n        refs.workoutsList.innerHTML = createWorkoutCardsMarkup(excercises);\n      }\n    } else {\n      totalPages = Math.ceil(savedExercises.length / 8);\n      if (currentPage > totalPages) {\n        currentPage = totalPages;\n      }\n      const excercises = savedExercises.slice(\n        (currentPage - 1) * 8,\n        currentPage * 8\n      );\n      if (currentPage !== 1 && savedExercises.length === 0) {\n        currentPage -= 1;\n        refs.workoutsList.innerHTML = createWorkoutCardsMarkup(\n          savedExercises.slice((currentPage - 1) * 8, currentPage * 8)\n        );\n      } else {\n        refs.workoutsList.innerHTML = createWorkoutCardsMarkup(excercises);\n      }\n    }\n    renderPagination(currentPage, totalPages);\n  }\n}\n\nfunction removeWorkoutCard(evt) {\n  const target = evt.target;\n  const closestButton = target.closest('.fav-workouts-remove-button');\n  if (!closestButton) {\n    return;\n  }\n  const removeElement = target.closest('.fav-workouts-list-item');\n  const removeElementId = removeElement.dataset.id;\n  const savedExercises = JSON.parse(localStorage.getItem('savedExercises'));\n\n  const removeElementIndex = savedExercises.findIndex(\n    excercise => excercise._id === removeElementId\n  );\n  if (removeElementIndex === -1) {\n    showMessage('error', 'Excercise is already removed from favorites.');\n  } else {\n    savedExercises.splice(removeElementIndex, 1);\n    localStorage.setItem('savedExercises', JSON.stringify(savedExercises));\n  }\n  renderWorkoutsMarkup(savedExercises);\n}\n\nfunction renderPagination(currentPage, totalPages) {\n  if (totalPages <= 1) {\n    refs.paginationList.classList.add('visually-hidden');\n    return;\n  }\n  refs.paginationList.classList.remove('visually-hidden');\n  refs.paginationList.innerHTML = createPaginationMarkup(\n    currentPage,\n    totalPages\n  );\n}\n\nfunction navigateToPage(evt) {\n  const closestButton = evt.target.closest('.js-page');\n  if (!closestButton) {\n    return;\n  }\n\n  const pageNavigate = closestButton.dataset.pageNavigate;\n\n  if (Number(pageNavigate) === currentPage) {\n    return;\n  }\n\n  switch (pageNavigate) {\n    case 'first-page':\n      currentPage = 1;\n      break;\n    case 'previous-page':\n      currentPage = currentPage - 1;\n      break;\n    case 'next-page':\n      currentPage = currentPage + 1;\n      break;\n    case 'last-page':\n      currentPage = totalPages;\n      break;\n    default:\n      if (Number.isNaN(Number(pageNavigate))) {\n        return;\n      }\n      currentPage = Number(pageNavigate);\n  }\n  const savedExercises = localStorage.getItem('savedExercises');\n  renderWorkoutsMarkup(JSON.parse(savedExercises));\n}\n\nfunction showMessage(type, message) {\n  let color;\n  if (type === 'error') {\n    color = '#f58e82';\n  } else {\n    color = '#9dfab5';\n  }\n\n  iziToast.show({\n    messageColor: '#262121',\n    backgroundColor: color,\n    messageSize: '18px',\n    position: 'bottomRight',\n    progressBar: false,\n    animateInside: false,\n    timeout: 3000,\n    targetFirst: false,\n    message: message,\n  });\n}\n"],"names":["createPaginationMarkup","currentPage","totalPages","createBeforePageNumbersMarkup","createPageNumbersMarkup","createAfterPageNumbersMarkup","pageNumbers","i","isDisabled","createWorkoutCardsMarkup","array","obj","createWorkoutCardMarkup","_id","name","time","burnedCalories","bodyPart","target","refs","device","createStartMarkup","savedExercises","renderWorkoutsMarkup","removeWorkoutCard","navigateToPage","currentSavedExercises","isCardsActual","newDevice","card","idx","excercises","renderPagination","evt","removeElementId","removeElementIndex","excercise","showMessage","closestButton","pageNavigate","type","message","color","iziToast"],"mappings":"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"}