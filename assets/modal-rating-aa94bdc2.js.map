{"version":3,"file":"modal-rating-aa94bdc2.js","sources":["../../src/js/page-switcher.js","../../src/js/mobile-menu.js","../../src/js/modal.js","../../src/js/modal-rating.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\n    const currentPage = window.location.pathname.split(\"/\").pop();\n    \n    const navLinks = document.querySelectorAll(\".header-nav-list-item a\");\n\n    navLinks.forEach(function (link) {\n        const linkPage = link.getAttribute(\"href\").split(\"/\").pop();\n\n        if (currentPage === linkPage || (currentPage === \"\" && linkPage === \"index.html\")) {\n        link.classList.add(\"header-nav-current\");\n        } else {\n        link.classList.remove(\"header-nav-current\");\n        }\n    });\n});","(() => {\n  const mobileMenu = document.querySelector('.js-menu-container');\n  const openMenuBtn = document.querySelector('.js-open-menu');\n  const closeMenuBtn = document.querySelector('.js-close-menu');\n\n  const toggleMenu = () => {\n    const isMenuOpen =\n      openMenuBtn.getAttribute('aria-expanded') === 'true' || false;\n      openMenuBtn.setAttribute('aria-expanded', !isMenuOpen);\n      mobileMenu.classList.toggle('is-open');\n  };\n\n  openMenuBtn.addEventListener('click', toggleMenu);\n  closeMenuBtn.addEventListener('click', toggleMenu);\n\n  window.matchMedia('(min-width: 768px)').addEventListener('change', e => {\n    if (!e.matches) return;\n    mobileMenu.classList.remove('is-open');\n    openMenuBtn.setAttribute('aria-expanded', false);\n  });\n})();","// Get the modal element\nvar modal = document.getElementById(\"myModal\");\n\n// Get the button that opens the modal\nvar btn = document.getElementById(\"openModalBtn\");\n\n// Get the <span> element that closes the modal\nvar span = document.getElementsByClassName(\"main-modal__close\")[0];\n\n// When the user clicks the button, open the modal\nbtn.onclick = function() {\n  modal.style.display = \"flex\";\n}\n\n// When the user clicks on (x), close the modal\nspan.onclick = function() {\n  modal.style.display = \"none\";\n}\n\n// When the user clicks anywhere outside of the modal, close it\nwindow.onclick = function(event) {\n  if (event.target == modal) {\n    modal.style.display = \"none\";\n  }\n}\n\nconst apiUrl = 'https://your-energy.b.goit.study/api/exercises/64f389465ae26083f39b17a3';\n\nfetch(apiUrl)\n.then(response => {\n  if (!response.ok) {\n    throw new Error('Network response was not ok');\n  }\n  return response.json();\n})\n.then(data => {\n  console.log(data);\n  displayExerciseDetails(data);\n  \n})\n.catch(error => {\n  console.error('There was a problem with the fetch operation:', error);\n}) \n\nfunction displayExerciseDetails(data) {\n  const exerciseDetailsContainer = document.getElementById('exerciseDetails');\n  \n  let gifImage = null\n  \n  if(data.gifUrl){\n    gifImage = `<div class=\"main-modal__gif-wrapper\">\n    <img class=\"gif\" src=\"${data.gifUrl}\" alt=\"Exercise GIF\">\n    <div class=\"gif-overlay\"></div>\n    </div>`;\n  }else{\n    gifImage = `<div class=\"main-modal__gif-wrapper\">\n    <img class=\"main-modal__gif\" src=\"https://i.ibb.co/ZfpKSXz/depositphotos-197890504-stock-illustration-vector-man-engaged-gym.webp\" alt=\"depositphotos-197890504-stock-illustration-vector-man-engaged-gym\" alt=\"Exercise IMG\">\n    <div class=\"main-modal__gif-overlay\"></div>\n    </div>`;\n  }\n  \n  const title = `<p class='main-modal__card-title'>${data.name}</p>`\n  const stars = generateStarRating(Math.round(data.rating));\n  \n  const rating = `<div class='main-modal__rating-container'>\n  <span class=\"main-modal__rating\">${data.rating % 1 >= 0.5 ? Math.ceil(data.rating) +'.0' : Math.floor(data.rating) +'.0'}</span>\n  ${stars}\n  </div>`\n  \n  const details = `<div class=\"main-modal__details-container\">\n  <div class=\"main-modal__details-wrapper\">\n  <p class=\"main-modal__details-title\">Target</p>\n  <p class=\"main-modal__details-info\">${data.target}</p>\n  </div>\n  <div class=\"main-modal__details-wrapper\">\n  <p class=\"main-modal__details-title\">Body Part</p>\n  <p class=\"main-modal__details-info\">${data.bodyPart}</p>\n  </div>\n  <div class=\"main-modal__details-wrapper\">\n  <p class=\"main-modal__details-title\">Equipment</p>\n  <p class=\"main-modal__details-info\">${data.equipment}</p>\n  </div>\n  <div class=\"main-modal__details-wrapper\">\n  <p class=\"main-modal__details-title\">Popular</p>\n  <p class=\"main-modal__details-info\">${data.popularity}</p>\n  </div>\n  </div>\n  <div class=\"main-modal__details-wrapper calories\">\n  <p class=\"main-modal__details-title\">Burned Calories</p>\n  <p class=\"main-modal__details-info\">${data.burnedCalories}</p>\n  </div>`\n  \n  const description = `<div class=\"main-modal__description\">${data.description}</div>`\n  \n  exerciseDetailsContainer.innerHTML = `${ gifImage +`<div class=\"main-modal__content-wrapper\">${title + rating + details + description}</div>`}`;\n}\n\n// Function to generate star icons based on rating\nfunction generateStarRating(rating) {\n  const starIcon = `<div class=\"main-modal__star-wrapper\"><svg class=\"main-modal__star-icon main-modal__colored-star\" aria-label=\"logo icon\">\n  <use href=\"./img/icons.svg#icon-star\"></use>\n  </svg></div>`;\n  \n  const emptyStar = `<div class=\"main-modal__star-wrapper\"><svg class=\"main-modal__star-icon \" aria-label=\"logo icon\">\n  <use href=\"./img/icons.svg#icon-star\"></use>\n  </svg></div>`;\n  let starsHTML = '';\n  let integerPart = Math.floor(rating);  \n  let decimalPart = rating - integerPart;  \n  \n  // Fill stars based on the integer part (whole number)\n  for (let i = 0; i < 5; i++) {\n    if (i < integerPart) {\n      starsHTML += starIcon;  \n    } else {\n      if (i === integerPart && decimalPart >= 0.5) {\n        starsHTML += starIcon;  \n      } else {\n        starsHTML += emptyStar;  \n      }\n    }\n  }\n  \n  return `${starsHTML}`;\n}\n","// TODO:\n// 1. integrate into another modal window\n// 2. add dynamic exercice id\n// 3. implement iziToast notifications\n\nimport axios from 'axios';\n\nconst backdrop = document.querySelector('.rating-backdrop');\nconst closeButton = document.querySelector('.rating__close-btn');\nconst submitButton = document.querySelector('.rating__submit-btn');\nconst stars = document.querySelectorAll('.rating__input');\nconst emailInput = document.querySelector('.rating__input-email');\nconst commentInput = document.querySelector('.rating__input-comment');\n\nlet selectedStar = null;\n\nconst closeModal = () => {\n  backdrop.classList.remove('modal-open');\n  closeButton.removeEventListener('click', closeModal);\n};\n\nconst isValidEmail = (email) => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n};\n\nconst handleSubmit = async () => {\n  const starId = selectedStar?.id;\n  const starRating = parseInt(starId?.replace('star', ''), 10);\n\n  if (!starRating || isNaN(starRating)) {\n    console.log('Please add a rate')\n    // iziToast.show({ title: 'Error', message: 'Please add a rate' });\n    return;\n  }\n  if (isValidEmail(emailInput.value)) {\n    console.log('Please enter your email')\n    // iziToast.show({ title: 'Error', message: 'Please enter your email' });\n    return;\n  }\n  if (commentInput.value.length <= 3) {\n    console.log('Please leave your review')\n    // iziToast.show({ title: 'Error', message: 'Please leave your review' });\n    return;\n  }\n\n  const exerciseID = 'EXERCISE_ID'; // Replace with actual exercise ID\n  const url = `https://your-energy.b.goit.study/api/exercises/${exerciseID}/rating`;\n\n  try {\n    const response = await axios.patch(url, {\n      rate: starRating,\n      email: emailInput.value,\n      review: commentInput.value,\n    });\n    if (response.status === 200) {\n      iziToast.success({ title: 'Success', message: 'Rating submitted successfully!' });\n    } else {\n      iziToast.error({ title: 'Error', message: 'Failed to submit rating' });\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: 'Failed to submit rating' });\n  }\n  closeModal();\n};\n\nconst updateStarsColor = () => {\n  const starsArray = Array.from(stars);\n  starsArray.forEach((star, index) => {\n    const starIcon = star.nextElementSibling.querySelector('.rating__icon-star');\n    if (star === selectedStar || (selectedStar && index < starsArray.indexOf(selectedStar))) {\n      starIcon.style.fill = 'var(--stars-color-activ)';\n      starIcon.style.opacity = 1;\n    } else {\n      starIcon.style.fill = 'var(--second-color-light-theme)';\n      starIcon.style.opacity = 0.2;\n    }\n  });\n};\n\nstars.forEach(star => {\n  star.addEventListener('click', function (event) {\n    selectedStar = event.target;\n    updateStarsColor();\n  });\n});\n\nbackdrop.addEventListener('click', function (event) {\n  if (event.target === backdrop && !event.target.closest('.rating__close-btn') && !event.target.closest('.rating__submit-btn')) closeModal();\n});\n\ncloseButton.addEventListener('click', closeModal);\n\ndocument.addEventListener('keydown', (event) => {\n  if (event.key === 'Escape') closeModal();\n});\n\nsubmitButton.addEventListener('click', handleSubmit);\n"],"names":["currentPage","link","linkPage","mobileMenu","openMenuBtn","closeMenuBtn","toggleMenu","isMenuOpen","e","modal","btn","span","event","apiUrl","response","data","displayExerciseDetails","error","exerciseDetailsContainer","gifImage","title","stars","generateStarRating","rating","details","description","starIcon","emptyStar","starsHTML","integerPart","decimalPart","i","backdrop","closeButton","submitButton","emailInput","commentInput","selectedStar","closeModal","isValidEmail","email","handleSubmit","starId","starRating","url","axios","updateStarsColor","starsArray","star","index"],"mappings":"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"}