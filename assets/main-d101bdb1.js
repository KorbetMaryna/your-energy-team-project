import{a as _,i as f,l as C}from"./vendor-9ff3fcae.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();function E(e){const t=document.querySelector(".loader-container");e&&t.classList.remove("hidden"),t.classList.add("hidden")}document.addEventListener("DOMContentLoaded",function(){E(!0);const e=window.location.pathname.split("/").pop();document.querySelectorAll(".header-nav-list-item a").forEach(function(s){const n=s.getAttribute("href").split("/").pop();e===n||e===""&&n==="index.html"?(s.classList.add("header-nav-current"),E(!1)):(s.classList.remove("header-nav-current"),E(!1))})});(()=>{const e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),s=document.querySelector(".js-close-menu"),n=()=>{const i=t.getAttribute("aria-expanded")==="true"||!1;t.setAttribute("aria-expanded",!i),e.classList.toggle("is-open")};t.addEventListener("click",n),s.addEventListener("click",n),window.matchMedia("(min-width: 768px)").addEventListener("change",i=>{i.matches&&(e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1))})})();function U(){const e=document.getElementsByClassName("exercises-tiles-category-list"),t=document.getElementById("myModal"),s=document.getElementsByClassName("main-modal__close")[0],n=document.querySelector("body");let i=localStorage.getItem("savedExercises")?JSON.parse(localStorage.getItem("savedExercises")):[];s&&(s.onclick=function(){t.style.display="none",localStorage.removeItem("currentExercise"),document.body.style.overflow="auto"}),window.onclick=function(r){r.target==t&&(t.style.display="none",localStorage.removeItem("currentExercise"),document.body.style.overflow="auto")};for(let r=0;r<e.length;r+=1)e[r].addEventListener("click",function(u){const h=u.target.closest(".exercises-category-tile-button"),l=u.target.closest(".exercises-category-tile-item");if(h){const g=l.dataset.id;t.style.display="flex",n.style.overflow="hidden";const d=`https://your-energy.b.goit.study/api/exercises/${g}`;_.get(d).then(o=>{if(o)return localStorage.setItem("currentExercise",JSON.stringify(o.data)),o.data}).then(o=>{a(o);const v=document.getElementById("fav-btn");if(v){const O=i.some(L=>L._id===o._id);v.querySelector(".main-modal__heart-icon use").setAttribute("href",O?"./img/icons.svg#icon-trash":"./img/icons.svg#icon-heart"),v.querySelector(".main-modal__btn-text").textContent=O?"Remove from favorites":"Add to favorites",v.addEventListener("click",function(){const L=i.some($=>$._id===o._id);L?i=i.filter($=>$._id!==o._id):i.push(o),localStorage.setItem("savedExercises",JSON.stringify(i)),v.querySelector(".main-modal__btn-text").textContent=L?"Add to favorites":"Remove from favorites",v.querySelector(".main-modal__heart-icon use").setAttribute("href",L?"./img/icons.svg#icon-heart":"./img/icons.svg#icon-trash")})}}).catch(o=>{console.error("There was a problem with the Axios request:",o)})}});function a(r){const y=document.getElementById("exerciseDetails");let u=null;r.gifUrl?u=`<div class="main-modal__gif-wrapper">
        <img class="gif" src="${r.gifUrl}" alt="Exercise GIF">
        <div class="gif-overlay"></div>
        </div>`:u=`<div class="main-modal__gif-wrapper">
        <img class="main-modal__gif" src="https://i.ibb.co/ZfpKSXz/depositphotos-197890504-stock-illustration-vector-man-engaged-gym.webp" alt="depositphotos-197890504-stock-illustration-vector-man-engaged-gym" alt="Exercise IMG">
        <div class="main-modal__gif-overlay"></div>
        </div>`;const h=`<p class='main-modal__card-title'>${r.name.charAt(0).toUpperCase()+r.name.slice(1)}</p>`,l=c(Math.round(r.rating*10)/10),g=`<div class='main-modal__rating-container'>
      <span class="main-modal__rating">${r.rating.toString().includes(".")?Math.round(r.rating*10)/10:r.rating+".0"}</span>
      ${l}
      </div>`,d=`<div class="main-modal__details-container">
      <div class="main-modal__details-wrapper">
      <p class="main-modal__details-title">Target</p>
      <p class="main-modal__details-info">${r.target.charAt(0).toUpperCase()+r.target.slice(1)}</p>
      </div>
      <div class="main-modal__details-wrapper">
      <p class="main-modal__details-title body-part">Body Part</p>
      <p class="main-modal__details-info">${r.bodyPart.charAt(0).toUpperCase()+r.bodyPart.slice(1)}</p>
      </div>
      <div class="main-modal__details-wrapper">
      <p class="main-modal__details-title">Equipment</p>
      <p class="main-modal__details-info">${r.equipment.charAt(0).toUpperCase()+r.equipment.slice(1)}</p>
      </div>
      <div class="main-modal__details-wrapper">
      <p class="main-modal__details-title">Popular</p>
      <p class="main-modal__details-info">${r.popularity}</p>
      </div>
      </div>
      <div class="main-modal__details-wrapper main-modal__calories">
      <p class="main-modal__details-title">Burned Calories</p>
      <p class="main-modal__details-info">${r.burnedCalories+"/3 min"}</p>
      </div>`,o=`<div class="main-modal__description">${r.description}</div>`,v=`<div class="main-modal__btns-wrapper">
      <button class="main-modal__btn main-modal__fav-btn" id="fav-btn">
      <span class="main-modal__btn-text main-modal__fav-btn-text">Add to favorites</span>
      <svg class="main-modal__heart-icon" aria-label="logo icon">
      <use href="./img/icons.svg#icon-heart"></use>
      </svg>
      </button>
      <button class="main-modal__btn main-modal__rating-btn">
      <span class="main-modal__btn-text">Give a rating</span>
      </button>
      </div>`;y.innerHTML=`${u+`<div class="main-modal__content-container">${`<div class="main-modal__content-wrapper">${h+g+d+o} </div> ${v}`}</div>`}`}function c(r){const y=`<div class="main-modal__star-wrapper"><svg class="main-modal__star-icon main-modal__colored-star">
      <use href="./img/icons.svg#icon-star"></use>
      </svg></div>`,u=`<div class="main-modal__star-wrapper"><svg class="main-modal__star-icon">
      <use href="./img/icons.svg#icon-star"></use>
      </svg></div>`;let h="",l=Math.floor(r),g=r-l;for(let d=0;d<5;d++)if(d<l)h+=y;else if(d===l&&g>0){const o=Math.round(g*100);h+=`<div class="main-modal__star-wrapper" style="mask-image: linear-gradient(90deg, #EEA10C ${o}%, rgba(244, 244, 244, 0.2) ${o}%); -webkit-mask-image: linear-gradient(90deg, #EEA10C ${o}%, rgba(244, 244, 244, 0.2) ${o}%);"><svg class="main-modal__star-icon main-modal__colored-star" >
          <use href="./img/icons.svg#icon-star"></use>
          </svg></div>`}else h+=u;return`${h}`}}window.onload=function(){document.querySelector(".exercises-container")&&U()};f.settings({position:"topRight",transitionIn:"bounceInDown",closeOnEscape:!0});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector("#myModal");e.addEventListener("click",function(t){if(t.target.closest(".main-modal__rating-btn")){const n={backdrop:document.querySelector(".rating-backdrop"),closeButton:document.querySelector(".rating__close-btn"),submitButton:document.querySelector(".rating__submit-btn"),starsContainer:document.querySelectorAll(".rating__input"),emailInput:document.querySelector(".rating__input-email"),commentInput:document.querySelector(".rating__input-comment"),ratingValue:document.querySelector(".rating__value")};let i=null,a=JSON.parse(localStorage.getItem("currentExercise"))||{};n.ratingValue.innerHTML=a.rating.toString().includes(".")?Math.round(a.rating*10)/10:a.rating+".0";const c=()=>{e.style.display="none",n.backdrop.classList.add("modal-open"),n.closeButton.addEventListener("click",r)},r=()=>{n.backdrop.classList.remove("modal-open"),n.closeButton.removeEventListener("click",r),e.style.display="flex"},y=()=>{const l=Array.from(n.starsContainer);l.forEach((g,d)=>{const o=g.nextElementSibling.querySelector(".rating__icon-star");g===i||i&&d<l.indexOf(i)?(o.style.fill="var(--stars-color-activ)",o.style.opacity=1):(o.style.fill="var(--second-color-light-theme)",o.style.opacity=.2)})},u=l=>/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(l),h=async l=>{l.preventDefault();const g=i==null?void 0:i.id,d=parseInt(g==null?void 0:g.replace("star",""),10);if(!d||isNaN(d)){f.show({title:"Error",message:"Please add your rating"});return}if(!u(n.emailInput.value)){f.show({title:"Error",message:"Please enter a valid email address"});return}if(n.commentInput.value.length<=3){f.show({title:"Error",message:"Please leave your comment"});return}const o=`https://your-energy.b.goit.study/api/exercises/${a._id}/rating`;try{(await _.patch(o,{rate:d,email:n.emailInput.value,review:n.commentInput.value})).status===200?f.success({title:"Success",message:"Rating submitted successfully!"}):f.error({title:"Error",message:"Failed to submit rating"})}catch{f.error({title:"Error",message:"Failed to submit rating"})}r()};n.starsContainer.forEach(l=>{l.addEventListener("click",function(g){i=g.target,y()})}),n.backdrop.addEventListener("click",function(l){l.target===n.backdrop&&!l.target.closest(".rating__close-btn")&&!l.target.closest(".rating__submit-btn")&&r()}),n.closeButton.addEventListener("click",r),n.submitButton.addEventListener("click",h),document.addEventListener("keydown",l=>{l.key==="Escape"&&r()}),c()}})});const x="https://your-energy.b.goit.study/api";async function T(e,t){for(const i of Object.keys(t))t[i]===""&&delete t[i];const s=new URLSearchParams(t),{data:n}=await _(`${x}/${e}?${s}`);return E(!1),n}const H=async({page:e=1,limit:t=100}={})=>{const{data:s}=await _.get(`${x}/filters?filter=Muscles&page=${e}&limit=${t}`);return s},W=async({page:e=1,limit:t=100}={})=>{const{data:s}=await _.get(`${x}/filters?filter=Body+parts&page=${e}&limit=${t}`);return s},G=async({page:e=1,limit:t=100}={})=>{const{data:s}=await _.get(`${x}/filters?filter=Equipment&page=${e}&limit=${t}`);return s},z=async({bodyPart:e,muscle:t,equipment:s,page:n=1,limit:i=100})=>{const a=new URLSearchParams({bodypart:e,muscles:t,equipment:s,page:n,limit:i}),{data:c}=await _.get(`${x}/exercises?${a}`);return c};function S(e){return e[0].toUpperCase()+e.slice(1)}function J(e,t,s){return`      
<li class="exercises-filter-tile-item" data-name=${t} data-filter=${e.toLowerCase()}>
      <div class="exercises-filter-tile-gradient"></div>
      <img class="exercises-filter-tile-img" src="${s}" alt="${t}" onerror="this.onerror=null; this.src='./../img/no-image.jpg'"/>
      <div class="exercises-filter-tile-text-wrapper">
          <h3 class="exercises-filter-tile-headline">${S(t)}</h3>
          <p class="exercises-filter-tile-text">${e}</p>
      </div>
</li>`}function Q(e,t,s,n,i,a){return`      
<li class="exercises-category-tile-item" data-id=${a}>
    <div class="exercises-category-tile-top">
      <div class="exercises-category-tile-workout-wrapper">
        <span class="exercises-category-tile-badge">WORKOUT</span>
        <div class="exercises-category-tile-rating-wrapper">
          <span class="exercises-category-tile-rating">${e.toFixed(1)}</span>
          <svg
          class="exercises-category-tile-star-icon"
          width="18"
          height="18">
            <use href="./img/icons.svg#icon-star"></use>
          </svg>
        </div>
      </div>
      <button class="exercises-category-tile-button">Start 
        <svg 
        class="exercises-category-tile-arrow-icon"
        width="36" 
        height="36">
          <use href="./img/icons.svg#icon-arrow"></use>
        </svg>
      </button>
    </div>
    <div class="exercises-category-tile-middle">
      <svg 
      class="exercises-category-tile-man-icon"
      width="24" 
      height="24">
        <use href="./img/icons.svg#icon-running-man"></use>
      </svg>
      <h3 class="exercises-category-tile-name">${t}</h3>
    </div>
    <ul class="exercises-category-tile-bottom">
        <li class="exercises-category-tile-bottom-item">
        <span class="exercises-category-tile-bottom-title">Burned calories:</span>
        ${s}</li>
        <li class="exercises-category-tile-bottom-item">
        <span class="exercises-category-tile-bottom-title">Body part:</span>
        ${S(n)}</li>
        <li class="exercises-category-tile-bottom-item">
        <span class="exercises-category-tile-bottom-title">Target:</span>
        ${S(i)}</li>
    </ul>
</li>`}f.settings({position:"topRight",transitionIn:"bounceInDown",closeOnEscape:!0});const m={headlineWrapper:document.querySelector(".js-headline-category-wrapper"),headlineCategory:document.querySelector(".js-headline-category"),searchForm:document.querySelector(".js-search-form"),filterButtons:document.querySelectorAll(".js-button"),tilesFilterList:document.querySelector(".js-tiles-filter-list"),tilesCategoryList:document.querySelector(".js-tiles-category-list"),paginationList:document.querySelector(".js-pagination")};let p={filter:"Muscles",bodypart:"",muscles:"",equipment:"",keyword:"",page:1};function w(e,t){return e!==""?p.limit=t<768?9:12:p.limit=t<768?8:10,p.limit}w(p.filter,window.innerWidth);q("filters",p);m.filterButtons.forEach(e=>{e.addEventListener("click",()=>{Object.assign(p,{bodypart:"",muscles:"",equipment:""}),p.filter=e.innerText,p.page=1,q("filters",p),j(e)})});function j(e){document.querySelector(".active-button").classList.remove("active-button"),e.classList.add("active-button")}async function q(e,t){E(!0),await T(e,t).then(s=>{var a;const{page:n,totalPages:i}=s;if((a=s.results[0])!=null&&a.filter){w(p.filter,window.innerWidth);const c="filters";V(s),I({page:n,totalPages:i,markupType:c}),m.headlineCategory.innerText="",m.headlineWrapper.classList.add("visually-hidden"),D()}else{w(p.filter,window.innerWidth);const c="exercises";R(s),I({page:n,totalPages:i,markupType:c})}}).catch(s=>{console.log(s),f.error({message:"Something went wrong :-( try again later."})}).finally(E(!1))}function V({results:e}){m.tilesCategoryList.innerHTML="",m.tilesCategoryList.classList.add("visually-hidden"),m.tilesFilterList.classList.remove("visually-hidden");const t=e.map(({filter:s,name:n,imgURL:i})=>J(s,n,i)).join("");m.tilesFilterList.innerHTML=t}var A;(A=m.tilesFilterList)==null||A.addEventListener("click",K);function K(e){if(e.preventDefault(),Object.assign(p,{filter:"",bodypart:"",muscles:"",equipment:""}),e.currentTarget===e.target)return;let{name:s,filter:n}=e.target.parentNode.dataset;n==="body"&&(n="bodypart"),Object.assign(p,{[n]:s}),q("exercises",p),F(s),m.searchForm.classList.remove("visually-hidden")}function F(e){m.headlineWrapper.classList.remove("visually-hidden"),m.headlineCategory.innerText=S(e)}function D(){m.searchForm.classList.add("visually-hidden")}function R({results:e}){if(!e.length)return f.warning({message:"Unfortunately, we don't have any exercises in this category"});m.tilesFilterList.innerHTML="",m.tilesFilterList.classList.add("visually-hidden"),m.tilesCategoryList.classList.remove("visually-hidden");const t=e.map(({rating:s,name:n,burnedCalories:i,bodyPart:a,target:c,_id:r})=>Q(s,n,i,a,c,r)).join("");m.tilesCategoryList.innerHTML=t}function I({page:e,totalPages:t,type:s,customListener:n}){m.paginationList.innerHTML="",t<=6?a(1,t,e,s):e<4?(a(1,4,e,s),c(),y(t,e)):e>t-3?(r(),c(),a(t-3,t,e,s)):(r(),c(),a(e-1,e+1,e,s),c(),y(t,e));function a(u,h,l,g){for(let d=u;d<=h;d++){const o=document.createElement("span");o.classList.add("exercises-pagination-item"),o.textContent=d,d===Number(l)&&o.classList.add("exercises-pagination-item-active"),o.addEventListener("click",()=>{p.page=d,n?n(p.page):q(g,p)}),m.paginationList.appendChild(o)}}function c(){const u=document.createElement("span");u.classList.add("exercises-pagination-item"),u.textContent="...",m.paginationList.appendChild(u)}function r(){a(1,1,e,s)}function y(u,h){a(u,u,h,s)}}const Z=document.querySelector(".quote-wrapper");async function X(){const e=new Date().toLocaleDateString(),t=ee(),s=JSON.parse(t);if(!s||s.date!=e){let{quote:n,author:i}=await te();P(n,i),Y(n,i,e)}else P(s.quote,s.author)}function Y(e,t,s){const n={quote:e,author:t,date:s};localStorage.setItem("quoteOfDay",JSON.stringify(n))}function ee(){return localStorage.getItem("quoteOfDay")}async function te(){try{const{quote:e,author:t}=await T("quote","");return{quote:e,author:t}}catch(e){N(e.message)}}function P(e,t){const s=`<p class="quote quote-text">${e}</p>
    <p class="qoute-author">${t}</p>`;Z.insertAdjacentHTML("beforeend",s)}function N(e){f.error({message:`${e}`})}X();const k=document.querySelector(".your-choice-button");class se{constructor(){this.id="your-choice-modal",this.bodyPartsOptions=[],this.bodyPartsSelectElem=document.getElementById("you-choice-body-part"),this.musclesOptions=[],this.musclesSelectElem=document.getElementById("your-choice-muscle"),this.equipmentOptions=[],this.equipmentSelectElem=document.getElementById("your-choice-equipment"),this.selectGroups=document.querySelectorAll(`#${this.id} .select-group`),this.submitBtnElem=document.getElementById("search-exercises"),this.submitBtnElem.addEventListener("click",()=>{this.triggerSearchExercises()}),C.init()}async show(){C.show(this.id);try{const[t,s,n]=await Promise.all([H(),W(),G()]);this.musclesOptions=t.results,this.bodyPartsOptions=s.results,this.equipmentOptions=n.results,console.log({muscles:t,bodyParts:s,equipment:n}),this.hideLoading(),this.toggleShowSelectGroups(!0),[{filters:this.musclesOptions,elem:this.musclesSelectElem},{filters:this.bodyPartsOptions,elem:this.bodyPartsSelectElem},{filters:this.equipmentOptions,elem:this.equipmentSelectElem}].forEach(({filters:i,elem:a})=>{console.log({filters:i,elem:a});const c=[];for(let r=0;r<i.length;r++){const{name:y}=i[r];c.push(`<option value=${r}>${y}</option>`)}a.innerHTML=c.join(""),this.hideLoading()})}catch(t){const s="Could not fetch lists of filters for modal";console.error(s,t),f.error({message:s})}}hideLoading(){document.querySelector(`#${this.id} .modal__content-loading`).classList.add("hidden")}toggleShowSelectGroups(t){for(const s of this.selectGroups)t?s.classList.remove("hidden"):s.classList.add("hidden")}getFormValues(){return{bodyPart:this.bodyPartsOptions[this.bodyPartsSelectElem.value].name,muscle:this.musclesOptions[this.musclesSelectElem.value].name,equipment:this.equipmentOptions[this.equipmentSelectElem.value].name}}async triggerSearchExercises(){const{bodyPart:t,muscle:s,equipment:n}=this.getFormValues();if(!(!t||!s||!n)){this.submitBtnElem.disabled=!0;try{if(!await this.getAndRenderExercises({page:1})){f.warning({message:"No exercises found. Try another set of muscle, body part and equipment paramaters."}),this.submitBtnElem.disabled=!1;return}F("you choice"),D(),C.close(),j(k)}catch(i){const a="Could not fetch exercises because of error";console.error(a,i),f.error({message:a})}finally{this.submitBtnElem.disabled=!1}}}async getAndRenderExercises({page:t=1}){const{bodyPart:s,muscle:n,equipment:i}=this.getFormValues(),a=w();console.log("Calling api with",{bodyPart:s,muscle:n,equipment:i,page:t,limit:a});const{totalPages:c,results:r}=await z({bodyPart:s,muscle:n,equipment:i,page:t,limit:a});return console.log({results:r}),(r||[]).length?(R({results:r}),I({page:t,totalPages:c,customListener:y=>{this.getAndRenderExercises({page:y})}}),!0):!1}}if(k){const e=new se;k.addEventListener("click",()=>{e.show()})}const ie=document.querySelector(".footer-sub-form"),ne="https://your-energy.b.goit.study/api/";ie.addEventListener("submit",re);async function re(e){e.preventDefault();const t=e.target.email.value;try{const{data:s}=await _.post(`${ne}subscription`,{email:t});ae(s.message)}catch(s){N(s.response.data.message)}}function ae(e){f.success({message:`${e}`})}function oe(e,t=300){let s;return(...n)=>{clearTimeout(s),s=setTimeout(()=>{e.apply(this,n)},t)}}function B(e){e.classList.remove("visually-hidden")}function M(e){e.classList.add("visually-hidden")}const b={searchClearBtnEl:document.querySelector(".js-search-form--btn__clear"),searchInputEl:document.querySelector(".js-search-form--input"),searchIconEl:document.querySelector(".js-search-form--btn__search"),searchClearEl:document.querySelector(".js-search-form--btn__clear"),searchFormEl:document.querySelector(".js-search-form")},ce=oe(e=>le(e),400);b.searchClearBtnEl.addEventListener("click",de);b.searchInputEl.addEventListener("input",ce);b.searchFormEl.addEventListener("submit",ue);function le({target:e}){e!=null&&e.value.trim()?(B(b.searchClearEl),M(b.searchIconEl)):(M(b.searchClearEl),B(b.searchIconEl))}function de(){b.searchInputEl.value="",M(b.searchClearEl),B(b.searchIconEl)}function ue(e){e.preventDefault()}
//# sourceMappingURL=main-d101bdb1.js.map
